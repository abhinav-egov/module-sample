{"version":3,"file":"utils.js","sources":["../../src/@egovernments/digit-utils/config/configUtils.js","../../src/@egovernments/digit-utils/config/mergeConfig.js","../../src/@egovernments/digit-utils/services/urls.js","../../src/@egovernments/digit-utils/services/Utils/Storage.js","../../src/@egovernments/digit-utils/services/Utils/Request.js","../../src/@egovernments/digit-utils/services/Localization/service.js","../../src/@egovernments/digit-utils/services/utils.js","../../src/@egovernments/digit-utils/services/MDMS.js","../../src/@egovernments/digit-utils/services/Store/service.js","../../src/@egovernments/digit-utils/services/Store/hook.js","../../src/@egovernments/digit-utils/translations/index.js","../../src/@egovernments/digit-utils/index.js"],"sourcesContent":["export const getSectionInfo = (formId, sectionId, defaultConfigCopy) => {\n  let sectionInfo;\n  let fieldToUpdate = { field: \"\", fields: [] };\n  for (let section of defaultConfigCopy) {\n    sectionInfo = section.form.find((formDetail) => {\n      return formDetail.id === sectionId;\n    });\n    if (sectionInfo) {\n      if (sectionInfo.fields) {\n        for (let field of sectionInfo.fields) {\n          if (field.id === formId) {\n            fieldToUpdate.field = field;\n            fieldToUpdate.fields = sectionInfo.fields;\n            break;\n          } else {\n            if (field.fields) {\n              for (let innerField of field.fields) {\n                if (innerField.id === formId) {\n                  fieldToUpdate.field = innerField;\n                  fieldToUpdate.fields = field.fields;\n                  break;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  return fieldToUpdate;\n};\n\nexport const ifObjectContainsArray = (object) => {\n  if (Array.isArray(object)) {\n    return { hasArray: true, value: object };\n  }\n  for (const property in object) {\n    if (object.hasOwnProperty(property)) {\n      const element = object[property];\n      if (Array.isArray(element)) {\n        return { hasArray: true, value: element };\n      }\n    }\n  }\n  return { hasArray: false, value: [] };\n};\n\n// module.exports = {\n//   getSectionInfo: getSectionInfo,\n//   ifObjectContainsArray: ifObjectContainsArray,\n// };\n","// let defaultConfig = require(\"./default2.json\");\nimport { ifObjectContainsArray } from \"./configUtils\";\n\nlet defaultConfigCopy = {};\nlet sectionToBeUpdated = {};\nlet currentUpdatableSection = [];\nlet selectedProperty = \"\";\n\nconst MergeConfigObj = (defaultConfig, deltaConfig) => {\n  defaultConfigCopy = JSON.parse(JSON.stringify(defaultConfig));\n  let deltaConfigCopy = JSON.parse(JSON.stringify(deltaConfig));\n  processStateConfig(deltaConfigCopy);\n  return defaultConfigCopy;\n};\n\nconst processStateConfig = (deltaConfig) => {\n  if (Array.isArray(deltaConfig)) {\n    deltaConfig.forEach((forms) => {\n      sectionToBeUpdated = {};\n      InitSectionToUpdate(forms);\n    });\n  }\n};\n\nconst InitSectionToUpdate = (forms) => {\n  if (forms.id && !forms.__property__) {\n    GetCurrentUpdatableSection(forms.id, defaultConfigCopy);\n  }\n  if (forms.__property__ && forms.__action__) {\n    selectedProperty = forms.__property__;\n    currentUpdatableSection = currentUpdatableSection.length === 0 ? defaultConfigCopy : currentUpdatableSection;\n    findSectionById(selectedProperty, currentUpdatableSection);\n    seachInDefaultConfig(forms.__property__, forms);\n  } else if (Array.isArray(forms)) {\n    forms.forEach((form) => {\n      InitSectionToUpdate(form);\n    });\n  } else if (ifObjectContainsArray(forms).hasArray) {\n    let array = ifObjectContainsArray(forms).value;\n    InitSectionToUpdate(array);\n  } else {\n    throw new Error(\"__property__ or  __action__ not found\");\n  }\n};\n\nconst GetCurrentUpdatableSection = (id, defaultConfigCopy) => {\n  if (Array.isArray(defaultConfigCopy)) {\n    for (let i = 0; i < defaultConfigCopy.length; i++) {\n      if (defaultConfigCopy[i].id === id) {\n        currentUpdatableSection.push(defaultConfigCopy[i]);\n        //console.log(\"matched\", currentUpdatableSection);\n      } else if (ifObjectContainsArray(defaultConfigCopy[i]).hasArray) {\n        let array = ifObjectContainsArray(defaultConfigCopy[i]).value;\n        GetCurrentUpdatableSection(id, array);\n      }\n    }\n  }\n};\n\nconst findSectionById = (id, currentUpdatableSection) => {\n  if (Array.isArray(currentUpdatableSection)) {\n    for (let i = 0; i < currentUpdatableSection.length; i++) {\n      if (currentUpdatableSection[i].id === id) {\n        sectionToBeUpdated = currentUpdatableSection;\n      } else if (ifObjectContainsArray(currentUpdatableSection[i]).hasArray) {\n        let arr = ifObjectContainsArray(currentUpdatableSection[i]).value;\n        findSectionById(id, arr);\n      }\n    }\n  }\n\n  return sectionToBeUpdated;\n};\n\nconst seachInDefaultConfig = (id, action) => {\n  if (!Array.isArray(sectionToBeUpdated) && !sectionToBeUpdated.id) {\n    throw new Error(\"id not found\");\n  }\n  if (sectionToBeUpdated.id === id) {\n    actionHandler(action, id, sectionToBeUpdated);\n  } else if (Array.isArray(sectionToBeUpdated)) {\n    sectionToBeUpdated.forEach((section) => {\n      if (section.id === id) {\n        actionHandler(action, id, sectionToBeUpdated);\n      }\n    });\n  } else if (ifObjectContainsArray(sectionToBeUpdated).hasArray) {\n    sectionToBeUpdated = ifObjectContainsArray(sectionToBeUpdated).value;\n    seachInDefaultConfig(id, action);\n  }\n};\n\nconst actionHandler = (action, id, fieldList) => {\n  const index = getIndex(id, fieldList);\n  if (!action) {\n    console.log(\"no action found\");\n    return;\n  }\n  if (action.__action__ === \"UPDATE\") {\n    updateAt(index, action, fieldList);\n    deleteExtraKeys(action);\n  }\n  if (action.__action__ === \"DELETE\") {\n    deleteAt(index, fieldList);\n    deleteExtraKeys(action);\n  }\n  if ([\"INSERT_AFTER\", \"INSERT_BEFORE\"].includes(action.__action__)) {\n    handleInsertion(index, action, fieldList);\n  }\n};\n\nconst handleInsertion = (index, action, fields) => {\n  index = action.__action__ === \"INSERT_BEFORE\" ? index : index + 1;\n  insertAt(index, action, fields);\n  deleteExtraKeys(action);\n};\n\nconst getIndex = (propertyValue, fields) => {\n  let index = fields.findIndex((option) => option.id === propertyValue);\n\n  return index;\n};\n\nconst insertAt = (index, data, fields) => {\n  if (!data.id) {\n    throw new Error(\"id is required is required to insert a record\");\n  }\n  fields.splice(index, 0, data);\n};\n\nconst updateAt = (index, data, fields) => {\n  if (fields[index].id !== data.id) {\n    throw new Error(`id ${data.id} not matched`);\n  }\n  fields[index] = { ...fields[index], ...data };\n};\n\nconst deleteAt = (index, fields) => {\n  fields.splice(index, 1);\n};\n\nconst deleteExtraKeys = (data) => {\n  delete data.__action__;\n  delete data.__property__;\n};\n\nconst getMergedConfig = (defaultConfig, deltaConfig) => {\n  let mergedConfigObj = defaultConfig;\n\n  for (const key in deltaConfig) {\n    if (deltaConfig.hasOwnProperty(key)) {\n      const mergedConfig = MergeConfigObj(defaultConfig[key], deltaConfig[key]);\n      mergedConfigObj[key] = mergedConfig;\n    }\n  }\n  return mergedConfigObj;\n};\n\nexport default getMergedConfig;\n","const Urls = {\n  MDMS: `/egov-mdms-service/v1/_search`,\n  localization: `/localization/messages/v1/_search`,\n  location: {\n    localities: `/egov-location/location/v11/boundarys/_search?hierarchyTypeCode=ADMIN&boundaryType=Locality`,\n  },\n};\n\nexport default Urls;\n","const localStoreSupport = () => {\n  try {\n    return \"sessionStorage\" in window && window[\"sessionStorage\"] !== null;\n  } catch (e) {\n    return false;\n  }\n};\nconst storageClass = window.sessionStorage;\nconst k = (key) => `eGov.Rainmaker.${key}`;\nexport const Storage = {\n  get: (key) => {\n    if (localStoreSupport() && key) {\n      let valueInStorage = storageClass.getItem(k(key));\n      return valueInStorage && valueInStorage !== \"undefined\" ? JSON.parse(valueInStorage) : null;\n    } else if (typeof window !== \"undefined\") {\n      return window && window.eGov && window.eGov.Storage && window.eGov.Storage[k(key)];\n    } else {\n      return null;\n    }\n  },\n  set: (key, value) => {\n    if (localStoreSupport()) {\n      storageClass.setItem(k(key), JSON.stringify(value));\n    } else if (typeof window !== \"undefined\") {\n      window.eGov = window.eGov || {};\n      window.eGov.Storage = window.eGov.Storage || {};\n      window.eGov.Storage[k(key)] = value;\n    }\n  },\n  del: (key) => {\n    if (localStoreSupport()) {\n      storageClass.removeItem(k(key));\n    } else if (typeof window !== \"undefined\") {\n      window.eGov = window.eGov || {};\n      window.eGov.Storage = window.eGov.Storage || {};\n      delete window.eGov.Storage[k(key)];\n    }\n  },\n};\n","import Axios from \"axios\";\nimport { Storage } from \"./Storage\";\n\nAxios.interceptors.request.use((req) => {\n  document.body.classList.add(\"loader\");\n  return req;\n});\n\nAxios.interceptors.response.use((res) => {\n  document.body.classList.remove(\"loader\");\n  return res;\n});\n\nexport const Request = async ({ method = \"POST\", url, data = {}, useCache = false, params = {} }) => {\n  let key = \"\";\n  if (method.toUpperCase() === \"POST\") {\n    data.RequestInfo = {\n      apiId: \"Rainmaker\",\n    };\n  }\n  if (useCache) {\n    key = `${method.toUpperCase()}.${url}.${JSON.stringify(params, null, 0)}.${JSON.stringify(data, null, 0)}`;\n    const value = Storage.get(key);\n    if (value) {\n      return value;\n    }\n  } else {\n    params._ = Date.now();\n  }\n\n  const res = await Axios({ method, url, data, params });\n  if (useCache) {\n    Storage.set(key, res.data);\n  }\n\n  return res.data;\n};\n","import Urls from \"../urls\";\nimport { Storage } from \"../Utils/Storage\";\nimport i18next from \"i18next\";\nimport { Request } from \"../Utils/Request\";\n\nconst LOCALE_LIST = (locale) => `Locale.${locale}.List`;\nconst LOCALE_MODULE = (locale, module) => `Locale.${locale}.${module}`;\n\nconst TransformArrayToObj = (traslationList) => {\n  return traslationList.reduce(\n    // eslint-disable-next-line\n    (obj, item) => ((obj[item.code] = item.message), obj),\n    {}\n  );\n  // return trasformedTraslation;\n};\n\nconst LocalizationStore = {\n  getList: (locale) => Storage.get(LOCALE_LIST(locale)) || [],\n  store: (locale, modules, messages) => {\n    modules.forEach((module) => {\n      const Locales = LocalizationStore.getList(locale);\n      if (!Locales.includes(module)) {\n        Locales.push(module);\n        Storage.set(LOCALE_LIST(locale), Locales);\n        const moduleMessages = messages.filter((message) => message.module === module);\n        Storage.set(LOCALE_MODULE(locale, module), moduleMessages);\n      }\n    });\n  },\n  get: (locale, modules) => {\n    const storedModules = LocalizationStore.getList(locale);\n    const newModules = modules.filter((module) => !storedModules.includes(module));\n    const messages = [];\n    storedModules.forEach((module) => {\n      messages.push(...Storage.get(LOCALE_MODULE(locale, module)));\n    });\n    return [newModules, messages];\n  },\n\n  updateResources: (locale, messages) => {\n    let locales = TransformArrayToObj(messages);\n    i18next.addResources(locale.split(\"_\")[0], \"translations\", locales);\n  },\n};\n\nexport const LocalizationService = {\n  getLocale: async ({ modules = [], locale = \"en_IN\", tenantId }) => {\n    if (locale.indexOf(\"_IN\") === -1) {\n      locale += \"_IN\";\n    }\n    const [newModules, messages] = LocalizationStore.get(locale, modules);\n    if (newModules.length > 0) {\n      const data = await Request({ url: Urls.localization, params: { module: newModules.join(\",\"), locale, tenantId }, useCache: false });\n      messages.push(...data.messages);\n    }\n    LocalizationStore.store(locale, modules, messages);\n    LocalizationStore.updateResources(locale, messages);\n    return messages;\n  },\n};\n","export const SortByName = (na, nb) => {\n  if (na < nb) {\n    return -1;\n  }\n  if (na > nb) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const GetCitiesWithi18nKeys = (MdmsRes, moduleCode) => {\n  const cityList = (MdmsRes.tenant.citymodule && MdmsRes.tenant.citymodule.filter((module) => module.code === moduleCode)[0].tenants) || [];\n  const citiesMap = cityList.map((city) => city.code);\n  const cities = MdmsRes.tenant.tenants\n    .filter((city) => citiesMap.includes(city.code))\n    .map(({ code, name, logoId, emailId, address, contactNumber }) => ({\n      code,\n      name,\n      logoId,\n      emailId,\n      address,\n      contactNumber,\n      i18nKey: \"TENANT_TENANTS_\" + code.replace(\".\", \"_\").toUpperCase(),\n    }))\n    .sort((cityA, cityB) => {\n      const na = cityA.name.toLowerCase(),\n        nb = cityB.name.toLowerCase();\n      return SortByName(na, nb);\n    });\n  return cities;\n};\n","import Urls from \"./urls\";\nimport { GetCitiesWithi18nKeys } from \"./utils\";\nimport { Request } from \"./Utils/Request\";\n\nconst initRequestBody = (tenantId) => ({\n  MdmsCriteria: {\n    tenantId,\n    moduleDetails: [\n      {\n        moduleName: \"common-masters\",\n        masterDetails: [{ name: \"Department\" }, { name: \"Designation\" }, { name: \"StateInfo\" }],\n      },\n      {\n        moduleName: \"tenant\",\n        masterDetails: [{ name: \"tenants\" }, { name: \"citymodule\" }],\n      },\n    ],\n  },\n});\n\nconst getCriteria = ({ tenantId, moduleDetails }) => {\n  return {\n    MdmsCriteria: {\n      tenantId,\n      moduleDetails,\n    },\n  };\n};\n\nconst GetEgovLocations = (MdmsRes) => {\n  return MdmsRes[\"egov-location\"].TenantBoundary[0].boundary.children.map((obj) => ({\n    name: obj.localname,\n    i18nKey: obj.localname,\n  }));\n};\n\nconst transformResponse = (type, MdmsRes, moduleCode = \"PGR\") => {\n  switch (type) {\n    case \"citymodule\":\n      return GetCitiesWithi18nKeys(MdmsRes, moduleCode);\n    case \"egovLocation\":\n      return GetEgovLocations(MdmsRes);\n    default:\n      return MdmsRes;\n  }\n};\n\nexport const MdmsService = {\n  init: (stateCode = \"pb\") =>\n    Request({ url: Urls.MDMS, data: initRequestBody(stateCode), useCache: true, method: \"POST\", params: { tenantId: stateCode } }),\n  call: (details, stateCode = \"pb\") =>\n    Request({ url: Urls.MDMS, data: getCriteria(details), useCache: true, method: \"POST\", params: { tenantId: stateCode } }),\n  getDataByCriteria: async (mdmsDetails) => {\n    const moduleCode = \"PGR\";\n    const { MdmsRes } = await MdmsService.call(mdmsDetails.details);\n    return transformResponse(mdmsDetails.type, MdmsRes, moduleCode);\n  },\n};\n","import { LocalizationService } from \"../Localization/service\";\nimport { MdmsService } from \"../MDMS\";\nimport { GetCitiesWithi18nKeys } from \"../utils\";\n\nexport const StoreService = {\n  defaultData: async (stateCode, cityCode, moduleCode) => {\n    const { MdmsRes } = await MdmsService.init(stateCode);\n    const stateInfo = MdmsRes[\"common-masters\"].StateInfo[0];\n    let cities = GetCitiesWithi18nKeys(MdmsRes, moduleCode);\n\n    const defaultData = {\n      languages: stateInfo.hasLocalisation ? stateInfo.languages : [{ label: \"ENGLISH\", value: \"en_IN\" }],\n      stateInfo: { code: stateInfo.code, name: stateInfo.name, logoUrl: stateInfo.logoUrl },\n      cities,\n      cityCode,\n    };\n\n    defaultData.locales = await LocalizationService.getLocale({\n      modules: [\n        \"rainmaker-common\",\n        `rainmaker-${moduleCode.toLowerCase()}`,\n        `rainmaker-${stateCode.toLowerCase()}`,\n        `rainmaker-${cityCode.toLowerCase()}`,\n      ],\n      locale: defaultData.languages[0].value,\n      tenantId: stateCode,\n    });\n    return defaultData;\n  },\n};\n","import { useEffect, useState } from \"react\";\n// import mergeConfig from \"../../config/mergeConfig\";\nimport { StoreService } from \"./service\";\n\nexport const useStore = (defaultConfig, { deltaConfig, stateCode, cityCode, moduleCode }) => {\n  const [defaultStore, setDefaultStore] = useState({});\n\n  useEffect(() => {\n    const config = window.eGov.Config.mergeConfig(defaultConfig, deltaConfig);\n    StoreService.defaultData(stateCode, cityCode, moduleCode).then((defaultData) => {\n      const store = { config, ...defaultData };\n      console.log(\"store:\", store);\n      setDefaultStore(store);\n    });\n  }, [defaultConfig, deltaConfig, stateCode, cityCode, moduleCode]);\n\n  return defaultStore;\n};\n","import i18next from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport ReactPostprocessor from \"i18next-react-postprocessor\";\n\nconst i18nextConfig = {\n  lng: \"en\",\n  fallbackLng: \"en\",\n  debug: false,\n  ns: [\"translations\"],\n  defaultNS: \"translations\",\n  keySeparator: false,\n  saveMissing: false,\n  saveMissingTo: \"current\",\n  interpolation: {\n    escapeValue: false,\n    formatSeparator: \",\",\n  },\n  postProcess: [`reactPostprocessor`],\n  react: {\n    wait: true,\n    useSuspense: true,\n    bindI18n: \"loaded\",\n    bindI18nStore: \"added\",\n  },\n  resources: {\n    en: {\n      translation: {\n        welcome: \"Welcome\",\n      },\n    },\n  },\n};\n\nexport const initI18n = () => {\n  i18next.use(new ReactPostprocessor()).use(initReactI18next).init(i18nextConfig);\n};\n","\nimport mergeConfig from \"./config/mergeConfig\";\nimport { useStore } from \"./services/index\";\nimport { initI18n } from \"./translations/index\";\n\nconst initUtils = (Util, props) => {\n  window.eGov = window.eGov || {};\n  window.eGov[Util] = window.eGov[Util] || {};\n  window.eGov[Util] = { ...window.eGov[Util], ...props }\n}\n\ninitUtils(\"Config\", { mergeConfig })\ninitUtils(\"Services\", { useStore })\ninitUtils(\"Translation\", { initI18n })"],"names":["ifObjectContainsArray","object","Array","isArray","hasArray","value","property","hasOwnProperty","element","defaultConfigCopy","sectionToBeUpdated","currentUpdatableSection","selectedProperty","MergeConfigObj","defaultConfig","deltaConfig","JSON","parse","stringify","deltaConfigCopy","processStateConfig","forEach","forms","InitSectionToUpdate","id","__property__","GetCurrentUpdatableSection","__action__","length","findSectionById","seachInDefaultConfig","form","array","Error","i","push","arr","action","actionHandler","section","fieldList","index","getIndex","console","log","updateAt","deleteExtraKeys","deleteAt","includes","handleInsertion","fields","insertAt","propertyValue","findIndex","option","data","splice","getMergedConfig","mergedConfigObj","key","mergedConfig","Urls","MDMS","localization","location","localities","localStoreSupport","window","e","storageClass","sessionStorage","k","Storage","get","valueInStorage","getItem","eGov","set","setItem","del","removeItem","Axios","interceptors","request","use","req","document","body","classList","add","response","res","remove","Request","method","url","useCache","params","toUpperCase","RequestInfo","apiId","_","Date","now","LOCALE_LIST","locale","LOCALE_MODULE","module","TransformArrayToObj","traslationList","reduce","obj","item","code","message","LocalizationStore","getList","store","modules","messages","Locales","moduleMessages","filter","storedModules","newModules","updateResources","locales","i18next","addResources","split","LocalizationService","getLocale","tenantId","indexOf","join","SortByName","na","nb","GetCitiesWithi18nKeys","MdmsRes","moduleCode","cityList","tenant","citymodule","tenants","citiesMap","map","city","cities","name","logoId","emailId","address","contactNumber","i18nKey","replace","sort","cityA","cityB","toLowerCase","initRequestBody","MdmsCriteria","moduleDetails","moduleName","masterDetails","getCriteria","GetEgovLocations","TenantBoundary","boundary","children","localname","transformResponse","type","MdmsService","init","stateCode","call","details","getDataByCriteria","mdmsDetails","StoreService","defaultData","cityCode","stateInfo","StateInfo","languages","hasLocalisation","label","logoUrl","useStore","useState","defaultStore","setDefaultStore","useEffect","config","Config","mergeConfig","then","i18nextConfig","lng","fallbackLng","debug","ns","defaultNS","keySeparator","saveMissing","saveMissingTo","interpolation","escapeValue","formatSeparator","postProcess","react","wait","useSuspense","bindI18n","bindI18nStore","resources","en","translation","welcome","initI18n","ReactPostprocessor","initReactI18next","initUtils","Util","props"],"mappings":"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"}